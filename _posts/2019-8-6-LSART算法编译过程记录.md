---
published: true
title: LSART编译过程记录
category: 目标跟踪
tags: 
  - LSART
layout: post
---



# modified caffe的编译

ubuntu 18.04

cuda9.0

cudnn V3.0.8 for cuda 7.0

g++5.5 gcc5.5

opencv 2.4.9 (opencv的编译用g++4.9 gcc4.9)

不要修改原文件夹中的cudnn.hpp

# matcaffe编译

matlab2015b

g++4.9 gcc4.9

# 可能的问题

报错：

```
Invalid MEX-file
'/home/xw/caffeBuild/caffe-master/matlab/+caffe/private/caffe_.mexa64':
/home/xw/caffeBuild/caffe-master/matlab/+caffe/private/caffe_.mexa64: undefined
symbol:
_ZN2cv8imencodeERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEERKNS_11_InputArrayERSt6vectorIhSaIhEERKSB_IiSaIiEE
```

解决方法：

The problem here seems to be that caffe is compiled against the system version of opencv, but linking to the matlab version when running matcaffe. I was able to fix the problem by replacing the symbolic links for libopencv_[imgproc,core,highgui].so.2.4 in MATLAB/R2015a/bin/glnxa64 with a link for the versions in /usr/lib, as those were the three used by caffe. This fix probably breaks all the other opencv library files that were not replaced, so you might want to be careful or just replace them all.

```
libopencv_core.so.2.4 -> /usr/lib/x86_64-linux-gnu/libopencv_core.so.2.4.9
libopencv_highgui.so.2.4 -> /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.9
libopencv_imgproc.so.2.4 -> /usr/lib/x86_64-linux-gnu/libopencv_imgproc.so.2.4.9
```

PS:/usr/lib/x86_64-linux-gnu/ -> /usr/local/lib/

