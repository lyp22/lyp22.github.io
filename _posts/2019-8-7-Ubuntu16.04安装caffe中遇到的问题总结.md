---
published: true
title: Ubuntu16.04安装caffe及遇到的问题总结
category: caffe
tags: 
  - caffe
layout: post
---


# 基础库安装

```
sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler libopenblas-dev
sudo apt-get install --no-install-recommends libboost-all-dev
sudo apt-get install libopenblas-dev
```

# 克隆caffe代码到本地
git clone https://github.com/BVLC/caffe.git

# 修改Makefile.config、Makefile
Makefile.config中CUDA_ARCH变量配置。如果cuda 的版本号>=9.0，则在该文件夹下找到CUDA_ARCH变量，并把：

gencode arch=compute_20,code=sm_20 \ 

gencode arch=compute_20,code=sm_21

两行注释掉



# 问题

解决办法是依据出现错误的顺序而给出的，为了方便，可以直接先执行所有解决办法后再安装caffe。

1. ./include/caffe/common.hpp:5:27: fatal error: gflags/gflags.h: No such file or directory

解决办法：sudo apt-get install libgflags-dev

2. ./include/caffe/util/mkl_alternate.hpp:14:19: fatal error: cblas.h: No such file or directory

解决办法：sudo apt-get install libblas-dev

3. ./include/caffe/util/hdf5.hpp:6:18: fatal error: hdf5.h: No such file or directory

解决办法：在Makefile.config找到以下行并添加蓝色部分


INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include <font color="Blue">/usr/include/hdf5/serial</font> 

LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib <font color="Blue">/usr/lib/x86_64-linux-gnu/hdf5/serial</font>


4. ./include/caffe/util/db_lmdb.hpp:8:18: fatal error: lmdb.h: No such file or directory

解决办法：sudo apt install liblmdb-dev

5. /usr/bin/ld: cannot find -lcblas
    /usr/bin/ld: cannot find -latlas

解决办法：sudo apt install libatlas-base-dev

6. ./include/caffe/common.hpp:6:26: fatal error: glog/logging.h: No such file or directory

解决方法：sudo apt-get install libgoogle-glog-dev

